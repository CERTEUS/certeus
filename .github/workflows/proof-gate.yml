# +-------------------------------------------------------------+
# |                        CERTEUS                              |
# |                 Proof-Gate CI (Stub Artifacts)              |
# +-------------------------------------------------------------+
# ── CERTEUS Project ─────────────────────────────────────────────────────────────
# File: .github/workflows/proof-gate.yml
# License: Apache-2.0
# Description (PL): Workflow CI dla Proof-Gate: generuje i weryfikuje stuby.
# Description (EN): CI workflow for Proof-Gate: generates & verifies stubs.
# ────────────────────────────────────────────────────────────────

name: proof-gate

on:
  push:
    branches: [ "main", "develop" ]
  pull_request:

jobs:
  proof-gate:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.11"

      - name: Generate proof artifacts (stubs)
        run: python scripts/generate_proofs.py --out proof-artifacts

      - name: Verify proof artifacts (SHA256)
        run: python scripts/check_proofs.py --dir proof-artifacts

      - name: Upload artifacts (for audit)
        uses: actions/upload-artifact@v4
        with:
          name: proof-artifacts
          path: proof-artifacts
