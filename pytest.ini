# +=====================================================================+
# |                          CERTEUS — HEART                            |
# +=====================================================================+
# | FILE: pytest.ini                                                    |
# | ROLE:                                                               |
# |  PL: Konfiguracja PyTest – ścieżki testów.                          |
# |  EN: PyTest configuration – test paths.                             |
# +=====================================================================+

[pytest]
asyncio_mode = auto
markers =
    asyncio: mark test as asyncio
    integration: marks tests as integration tests (requires external services)
    stress: marks tests as stress/performance tests
    slow: marks tests as slow running tests
    unit: marks tests as unit tests
    api: marks tests as API tests
    security: marks tests as security tests
filterwarnings =
    ignore:Duplicate Operation ID.*:UserWarning:fastapi\.openapi\.utils
    ignore:validate_spec shortcut is deprecated.*:DeprecationWarning:openapi_spec_validator\.shortcuts
    ignore::UserWarning:pkg_resources.*

addopts = --maxfail=1 -q

[coverage:run]
branch = True
source = services,core,monitoring,scripts
data_file = out/.coverage

[coverage:report]
show_missing = True
skip_covered = True
fail_under = 0

[hypothesis]
# W18: stabilizacja testów właściwości — eliminujemy fałszywe alarmy
# spowodowane wolnym generowaniem danych (filtry w strategiach).
suppress_health_check = too_slow
deadline = 1000
